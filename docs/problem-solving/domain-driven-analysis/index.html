<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="상세 설명: [CPS Serialization Diagram](cps-serialization-diagram.md)">
  <meta name="author" content="Jindo Kim">
  <title>DDD Patterns in Jenkins Architecture | Post-Refactoring Analysis</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Mono:wght@400;700&display=swap">
  <link rel="stylesheet" href="../../css/portfolio-theme.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
  <!-- Mobile hamburger -->
  <button class="nav-toggle" aria-label="Toggle navigation">
    <span></span><span></span><span></span>
  </button>

  <!-- Sidebar overlay (mobile) -->
  <div class="nav-overlay"></div>

  <!-- Sidebar navigation -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <a href="../../">Post-Refactoring Analysis</a>
    </div>
    <div class="sidebar-content">
      <ul class="nav-tree"><li class="nav-depth-1"><a href="../../" class="nav-link">Home</a></li><li class="nav-depth-1"><button class="nav-section-btn">Problem Analysis</button><ul class="nav-children"><li class="nav-depth-2"><a href="../../problem-analysis/problem-analysis-overview/" class="nav-link">Problem Analysis Overview</a></li><li class="nav-depth-2"><a href="../../problem-analysis/detailed-analysis/" class="nav-link">Detailed Analysis</a></li><li class="nav-depth-2"><a href="../../problem-analysis/architecture-smells-analysis/" class="nav-link">Architecture Smells Analysis</a></li><li class="nav-depth-2"><a href="../../problem-analysis/DRY-violation-analysis/" class="nav-link">DRY Violation Analysis</a></li><li class="nav-depth-2"><button class="nav-section-btn">Pipeline Sequence Diagrams</button><ul class="nav-children"><li class="nav-depth-3"><a href="../../problem-analysis/pipeline-sequence-diagrams/domain-mapping/" class="nav-link">Domain Mapping</a></li><li class="nav-depth-3"><a href="../../problem-analysis/pipeline-sequence-diagrams/dlx-ci/" class="nav-link">DLXJenkins CI</a></li><li class="nav-depth-3"><a href="../../problem-analysis/pipeline-sequence-diagrams/dlx-cd/" class="nav-link">DLXJenkins CD</a></li><li class="nav-depth-3"><a href="../../problem-analysis/pipeline-sequence-diagrams/js-ci/" class="nav-link">JsJenkins CI</a></li><li class="nav-depth-3"><a href="../../problem-analysis/pipeline-sequence-diagrams/js-cd/" class="nav-link">JsJenkins CD</a></li><li class="nav-depth-3"><a href="../../problem-analysis/pipeline-sequence-diagrams/jenkins-ci/" class="nav-link">PipelineForJenkins CI</a></li></ul></li><li class="nav-depth-2"><button class="nav-section-btn">Per-File Analysis</button><ul class="nav-children"><li class="nav-depth-3"><button class="nav-section-btn">generalHelper</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../problem-analysis/01-generalHelper/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/01-generalHelper/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/01-generalHelper/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">jsHelper</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../problem-analysis/02-jsHelper/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/02-jsHelper/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/02-jsHelper/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">unityHelper</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../problem-analysis/03-unityHelper/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/03-unityHelper/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/03-unityHelper/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">DLXJenkins-Jenkinsfile</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../problem-analysis/04-DLXJenkins-Jenkinsfile/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/04-DLXJenkins-Jenkinsfile/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/04-DLXJenkins-Jenkinsfile/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">DLXJenkins-JenkinsfileDeployment</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../problem-analysis/05-DLXJenkins-JenkinsfileDeployment/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/05-DLXJenkins-JenkinsfileDeployment/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/05-DLXJenkins-JenkinsfileDeployment/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">JsJenkins-Jenkinsfile</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../problem-analysis/06-JsJenkins-Jenkinsfile/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/06-JsJenkins-Jenkinsfile/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/06-JsJenkins-Jenkinsfile/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">JsJenkins-JenkinsfileDeployment</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../problem-analysis/07-JsJenkins-JenkinsfileDeployment/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/07-JsJenkins-JenkinsfileDeployment/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/07-JsJenkins-JenkinsfileDeployment/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">PipelineForJenkins-Jenkinsfile</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../problem-analysis/08-PipelineForJenkins-Jenkinsfile/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/08-PipelineForJenkins-Jenkinsfile/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../problem-analysis/08-PipelineForJenkins-Jenkinsfile/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li></ul></li></ul></li><li class="nav-depth-1"><button class="nav-section-btn expanded">Problem Solving</button><ul class="nav-children"><li class="nav-depth-2"><a href="../../problem-solving/solution-overview/" class="nav-link">Solution Overview</a></li><li class="nav-depth-2"><a href="../../problem-solving/solution-by-layer/" class="nav-link">Solution by Layer</a></li><li class="nav-depth-2"><a href="../../problem-solving/solution-by-feature/" class="nav-link">Solution by Feature</a></li><li class="nav-depth-2"><a href="../../problem-solving/logger-system-design-integration/" class="nav-link">Logger System Design and Integration</a></li><li class="nav-depth-2"><a href="../../problem-solving/domain-driven-analysis/" class="nav-link active">Domain-Driven Analysis</a></li><li class="nav-depth-2"><a href="../../problem-solving/jenkins-cps-serialization-diagram/" class="nav-link">Jenkins CPS Serialization Diagram</a></li><li class="nav-depth-2"><a href="../../problem-solving/pull-request-documentation/" class="nav-link">Pull Request Documentation</a></li><li class="nav-depth-2"><button class="nav-section-btn">Implementation Phases</button><ul class="nav-children"><li class="nav-depth-3"><a href="../../problem-solving/phase-0-global-trusted-shared-library-setup/changelog/" class="nav-link">Phase 0 - Global Trusted Shared Library Setup</a></li><li class="nav-depth-3"><a href="../../problem-solving/phase-1-shellscript-modularization-and-initialization-stage/changelog/" class="nav-link">Phase 1 - Shell Script Modularization and Initialization Stage</a></li><li class="nav-depth-3"><a href="../../problem-solving/phase-2-3-level-logger-system-implementation/changelog/" class="nav-link">Phase 2 - 3-Level Logger System Implementation</a></li><li class="nav-depth-3"><a href="../../problem-solving/phase-3-bitbucket-api-and-shell-library-integration/changelog/" class="nav-link">Phase 3 - Bitbucket API and Shell Library Integration</a></li><li class="nav-depth-3"><a href="../../problem-solving/phase-4-full-pipeline-refactoring-and-stage-modularization/changelog/" class="nav-link">Phase 4 - Full Pipeline Refactoring and Stage Modularization</a></li></ul></li></ul></li></ul>
    </div>
  </nav>

  <!-- Main content -->
  <main class="content">
    <div class="container">
      <h1 id="ddd-patterns-in-jenkins-architecture">DDD Patterns in Jenkins Architecture</h1>
<p>This document analyzes the refactored Jenkins architecture and identifies similarities with <strong>DDD patterns</strong>, referencing Eric Evans' <em>Domain-Driven Design Reference</em> (2015).</p>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#background">Background</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#building-blocks-identified">Building Blocks Identified</a></li>
<li><a href="#1-layered-architecture-">Layered Architecture</a></li>
<li><a href="#2-modules-">Modules</a></li>
<li><a href="#3-infrastructure-layer-facade-pattern">Infrastructure Layer (Facade Pattern)</a></li>
<li><a href="#4-intention-revealing-interfaces-analysis">Intention-Revealing Interfaces (Analysis)</a></li>
<li><a href="#why-tactical-patterns-were-not-applied">Why Tactical Patterns Were Not Applied</a></li>
<li><a href="#why-strategic-design-patterns-were-not-applied">Why Strategic Design Patterns Were Not Applied</a></li>
<li><a href="#before-vs-after-comparison">Before vs After Comparison</a></li>
<li><a href="#summary">Summary</a></li>
<li><a href="#interview-talking-point">Interview Talking Point</a></li>
<li><a href="#references">References</a></li>
</ul>
<hr />
<h2 id="background">Background</h2>
<p>While researching how to articulate the refactored structure, I discovered Domain-Driven Design. Analyzing my architecture, I found it aligns with several DDD organizational principles:</p>
<ul>
<li><strong>Layered Architecture</strong>: My 4-layer separation matched DDD's isolation principle</li>
<li><strong>Modules</strong>: My domain-based libraries matched DDD's cohesive concept grouping</li>
</ul>
<h3 id="whats-missing-from-full-ddd">What's Missing from Full DDD</h3>
<p>DDD's tactical patterns (Entities, Aggregates, Repositories) require <strong>stateful domain objects</strong> with identity and lifecycle. Jenkins pipelines are stateless: each execution is independent, no objects persist across runs. These patterns simply don't apply.</p>
<p><strong>This is not a full DDD implementation.</strong> It's a domain-oriented architecture that shares organizational principles with DDD.</p>
<hr />
<h2 id="overview">Overview</h2>
<h3 id="ddd-pattern-categories">DDD Pattern Categories</h3>
<p>Domain-Driven Design (Eric Evans, 2003) organizes patterns into distinct categories:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Patterns</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Building Blocks</strong></td>
<td>Layered Architecture, Modules, Services, Entities, Value Objects</td>
<td>Code-level organization</td>
</tr>
<tr>
<td><strong>Strategic Design</strong></td>
<td>Bounded Contexts, Context Mapping, Core Domain, Subdomains</td>
<td>System-level organization</td>
</tr>
<tr>
<td><strong>Supple Design</strong></td>
<td>Intention-Revealing Interfaces, Side-Effect-Free Functions</td>
<td>Design quality</td>
</tr>
</tbody>
</table>
<h3 id="patterns-identified-in-this-architecture">Patterns Identified in This Architecture</h3>
<table>
<thead>
<tr>
<th>DDD Pattern</th>
<th>Category</th>
<th>Alignment</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Layered Architecture</strong></td>
<td>Building Blocks</td>
<td>✓ Applied</td>
<td>4-layer separation of concerns</td>
</tr>
<tr>
<td><strong>Modules</strong></td>
<td>Building Blocks</td>
<td>✓ Applied</td>
<td>Git/Shell/SSH libraries as cohesive units</td>
</tr>
<tr>
<td><strong>Infrastructure Service</strong></td>
<td>Building Blocks</td>
<td>Partial</td>
<td>Concept exists, implemented as GoF Facade</td>
</tr>
<tr>
<td><strong>Intention-Revealing Interfaces</strong></td>
<td>Supple Design</td>
<td>✗ No</td>
<td>Names expose implementation (git commands)</td>
</tr>
<tr>
<td><strong>Entities/Aggregates</strong></td>
<td>Building Blocks</td>
<td>✗ No</td>
<td>Not applicable to stateless pipeline scripts</td>
</tr>
<tr>
<td><strong>Domain Services</strong></td>
<td>Building Blocks</td>
<td>✗ No</td>
<td>No domain logic to coordinate</td>
</tr>
<tr>
<td><strong>Bounded Contexts</strong></td>
<td>Strategic Design</td>
<td>✗ No</td>
<td>Single team, single codebase</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="building-blocks-identified">Building Blocks Identified</h2>
<h3 id="1-layered-architecture">1. Layered Architecture ✓</h3>
<p>The architecture implements a <strong>4-layer structure</strong> that aligns with DDD's Layered Architecture pattern:</p>
<pre><code>┌─────────────────────────────────────────────────────────────────────┐
│                      LAYER 1: Entry Point                          │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐  │
│  │   DLXJenkins     │  │    JsJenkins     │  │  PipelineFor     │  │
│  │  [Unity Entry]   │  │   [JS Entry]     │  │    Jenkins       │  │
│  └──────────────────┘  └──────────────────┘  └──────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                 LAYER 2: Orchestration (vars/)                     │
│  ┌─────────────────────────┐  ┌─────────────────────────┐          │
│  │   stageLintUnity        │  │  stageInitialization    │          │
│  │   stageUnityExecution   │  │  stageDeployBuild       │          │
│  └─────────────────────────┘  └─────────────────────────┘          │
└─────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                 LAYER 3: Infrastructure                            │
│  Physical: src/service/         Physical: vars/ (CPS Constraint)   │
│  ┌─────────────────────────┐  ┌─────────────────────────┐          │
│  │   BitbucketApiService   │  │   shellScriptHelper     │          │
│  │  [HTTP Communication]   │  │  [Facade: Execution +   │          │
│  └─────────────────────────┘  │   Logging]              │          │
│                               └─────────────────────────┘          │
│                               ┌─────────────────────────┐          │
│                               │  bitbucketApiHelper     │          │
│                               │  [Facade: Credentials + │          │
│                               │   API orchestration]    │          │
│                               └─────────────────────────┘          │
└─────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                 LAYER 4: Modules                                   │
│  Physical: src/utils/                                               │
│  ┌───────────────────┐ ┌───────────────────┐ ┌───────────────────┐ │
│  │    GitLibrary     │ │   ShellLibrary    │ │  SSHShellLibrary  │ │
│  │   23 operations   │ │   15 operations   │ │    8 operations   │ │
│  └───────────────────┘ └───────────────────┘ └───────────────────┘ │
│  Physical: vars/ (CPS Constraint)                                   │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │ bitbucketApiLibrary - API request metadata definitions        │ │
│  └───────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────┘
</code></pre>
<p><strong>Key isolation achieved:</strong>
- Entry points depend only on Orchestration
- Orchestration depends only on Infrastructure
- Infrastructure depends only on Modules
- Modules have no upward dependencies</p>
<details>
<summary><strong>Jenkins CPS Constraint (Click to expand)</strong></summary>

Jenkins Pipeline applies CPS (Continuation-Passing Style) transformation for fault tolerance. This creates two constraints:

| Constraint | Description |
|------------|-------------|
| **Serializable** | Class fields must be serializable for state persistence across restarts |
| **Pipeline Step Context** | `sh`, `echo`, `withCredentials` must be called from `vars/` (CPS context) |

**Pattern: Indirect call via vars/**


<pre><code class="language-groovy">// src/HttpApiService.groovy
logger.stepProcessing(&quot;msg&quot;)  // ✓ OK - vars/에서 echo 실행
jenkinsfile.sh(&quot;...&quot;)         // ❌ 안 됨 - 직접 호출
</code></pre>


| Component | Location | Reason |
|-----------|----------|--------|
| **HttpApiService** | src/ | Pure Java (Apache HttpClient). logger는 vars/ 통해 간접 호출 |
| **shellScriptHelper** | vars/ | `sh()` 직접 호출 |
| **logger** | vars/ | `echo` 직접 호출 |

> 상세 설명: [CPS Serialization Diagram](../../problem-solving/jenkins-cps-serialization-diagram/)

</details>

<hr />
<h3 id="2-modules">2. Modules ✓</h3>
<p>Each utility library functions as a <strong>Module</strong> with characteristics that align with DDD's definition:</p>
<ul>
<li><strong>Cohesive concepts</strong>: Related operations grouped together</li>
<li><strong>Clear naming</strong>: Names reflect domain insight (Git operations, Shell operations, API operations)</li>
<li><strong>Low coupling</strong>: Can be understood independently</li>
</ul>
<table>
<thead>
<tr>
<th>Module</th>
<th>Location</th>
<th>Operations</th>
<th>Cohesive Concept</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>GitLibrary</strong></td>
<td>src/utils/</td>
<td>23</td>
<td>All version control operations</td>
</tr>
<tr>
<td><strong>ShellLibrary</strong></td>
<td>src/utils/</td>
<td>15</td>
<td>Local system execution</td>
</tr>
<tr>
<td><strong>SSHShellLibrary</strong></td>
<td>src/utils/</td>
<td>8</td>
<td>Remote server operations</td>
</tr>
<tr>
<td><strong>bitbucketApiLibrary</strong></td>
<td>vars/ (CPS)</td>
<td>8</td>
<td>Bitbucket API request definitions</td>
</tr>
</tbody>
</table>
<p><strong>Example: GitLibrary as a Module</strong></p>
<pre><code class="language-groovy">class GitLibrary {
    // Cohesive set of version control operations
    static final Closure CheckoutBranch = { String branchName -&gt;
        [
            script: &quot;git checkout ${branchName}&quot;,
            label: &quot;Checkout branch '${branchName}'&quot;,
            returnStdout: true
        ]
    }

    static final Closure MergeOriginBranch = { String branchToMerge -&gt;
        [
            script: &quot;git merge origin/${branchToMerge}&quot;,
            label: &quot;Merge remote branch 'origin/${branchToMerge}' into current HEAD&quot;,
            returnStatus: true
        ]
    }

    // ... 23 operations total
}
</code></pre>
<p><strong>Module characteristics achieved:</strong>
- <strong>High cohesion</strong>: Only git-related operations
- <strong>Encapsulation</strong>: Internal helpers prefixed with <code>_</code>
- <strong>Domain vocabulary</strong>: <code>checkout</code>, <code>branch</code>, <code>merge</code>, <code>tag</code></p>
<hr />
<h3 id="3-infrastructure-layer-facade-pattern">3. Infrastructure Layer (Facade Pattern)</h3>
<p>Layer 3 components are implemented using the <strong>Facade pattern</strong> from GoF design patterns, rather than DDD Services. This distinction is important:</p>
<p><strong>DDD Service definition</strong> (from DDD Reference, p.14):</p>
<blockquote>
<p>"When a significant process or transformation in the domain is not a natural responsibility of an entity or value object, add an operation to the model as a standalone interface declared as a service."</p>
</blockquote>
<p>Since this architecture has no Entities or Value Objects (stateless environment), the DDD Service pattern doesn't directly apply. Instead, these components serve as <strong>technical facades</strong> that simplify complex infrastructure operations:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Pattern</th>
<th>Responsibility</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>BitbucketApiService</strong></td>
<td>HTTP Client Wrapper</td>
<td>Encapsulates Apache HttpClient for API communication</td>
</tr>
<tr>
<td><strong>shellScriptHelper</strong></td>
<td>Facade</td>
<td>Combines Library closure execution + Logger integration</td>
</tr>
<tr>
<td><strong>bitbucketApiHelper</strong></td>
<td>Facade</td>
<td>Combines credentials management + API service orchestration</td>
</tr>
</tbody>
</table>
<p><strong>Example: shellScriptHelper as Facade</strong></p>
<pre><code class="language-groovy">// Simplifies: Library closure + validation + execution + logging
def call(Closure shellScriptClosure, List args = []) {
    Map shMap = shellScriptClosure(*args)
    Map validatedShMap = validateShMap(shMap)
    logger.stepStart(&quot;${validatedShMap.label}&quot;)

    if (validatedShMap.returnStatus) {
        return executeReturnStatus(validatedShMap)
    } else if (validatedShMap.returnStdout) {
        return executeReturnStdout(validatedShMap)
    }
    // ...
}
</code></pre>
<p><strong>Example: bitbucketApiHelper as Facade</strong></p>
<pre><code class="language-groovy">// Simplifies: credentials + API service + error handling
def call(Map bitbucketApiMap) {
    BitbucketApiService bitbucketApiService = new BitbucketApiService(this)

    withCredentials([string(credentialsId: 'bitbucket-access-token', variable: 'token')]) {
        if (bitbucketApiMap.method == 'POST') {
            return bitbucketApiService.post(bitbucketApiMap.apiUrlString, bitbucketApiMap.requestBody, token)
        }
        // ...
    }
}
</code></pre>
<hr />
<h3 id="4-intention-revealing-interfaces-analysis">4. Intention-Revealing Interfaces (Analysis)</h3>
<p><strong>DDD Definition:</strong> Names should describe effect and purpose, <strong>without reference to the means</strong> by which they do what they promise.</p>
<p><strong>Analysis of current naming:</strong></p>
<table>
<thead>
<tr>
<th>Operation Name</th>
<th>What It Reveals</th>
<th>Issue</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GitLibrary.CheckoutBranch</code></td>
<td><code>git checkout</code> command</td>
<td>Exposes implementation</td>
</tr>
<tr>
<td><code>GitLibrary.MergeOriginBranch</code></td>
<td><code>git merge origin/</code> command</td>
<td>Exposes implementation</td>
</tr>
<tr>
<td><code>GitLibrary.ResetHardHead</code></td>
<td><code>git reset --hard</code> command</td>
<td>Exposes implementation</td>
</tr>
<tr>
<td><code>ShellLibrary.PrintJenkinsEnv</code></td>
<td>Prints environment</td>
<td>Descriptive, but technical</td>
</tr>
<tr>
<td><code>SSHShellLibrary.CopyBuildToHostServer</code></td>
<td>SCP operation</td>
<td>Exposes implementation</td>
</tr>
</tbody>
</table>
<p><strong>Why this doesn't meet DDD criteria:</strong></p>
<p>The current names directly expose the underlying git/shell commands rather than describing the business intent. True Intention-Revealing names would be:</p>
<table>
<thead>
<tr>
<th>Current</th>
<th>Intention-Revealing Alternative</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CheckoutBranch</code></td>
<td><code>SwitchToBranch</code> or <code>ActivateBranch</code></td>
</tr>
<tr>
<td><code>MergeOriginBranch</code></td>
<td><code>IntegrateRemoteChanges</code></td>
</tr>
<tr>
<td><code>ResetHardHead</code></td>
<td><code>DiscardAllLocalChanges</code></td>
</tr>
<tr>
<td><code>CopyBuildToHostServer</code></td>
<td><code>DeployBuildArtifacts</code></td>
</tr>
</tbody>
</table>
<p><strong>Conclusion:</strong> The current naming is <strong>descriptive</strong> but not <strong>intention-revealing</strong> by DDD standards. Names follow git/shell command conventions rather than domain language.</p>
<hr />
<h2 id="why-tactical-patterns-were-not-applied">Why Tactical Patterns Were Not Applied</h2>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Description</th>
<th>Why Not Applicable</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Entities</strong></td>
<td>Objects with identity and lifecycle</td>
<td>Pipeline scripts are stateless</td>
</tr>
<tr>
<td><strong>Value Objects</strong></td>
<td>Immutable objects defined by attributes</td>
<td>No complex domain objects needed</td>
</tr>
<tr>
<td><strong>Aggregates</strong></td>
<td>Clusters with consistency boundaries</td>
<td>No persistent object relationships</td>
</tr>
<tr>
<td><strong>Repositories</strong></td>
<td>Collection-like access to aggregates</td>
<td>No persistent storage of domain objects</td>
</tr>
</tbody>
</table>
<p><strong>Stateless vs Stateful:</strong></p>
<p>DDD tactical patterns assume <strong>stateful</strong> domain objects where:
- Objects have identity that persists across operations
- State changes are tracked and managed
- Previous state influences next behavior</p>
<p>Jenkins pipelines are <strong>stateless</strong>:
- Each execution is independent
- No objects persist across pipeline runs
- External systems (Bitbucket, Azure) manage state</p>
<pre><code class="language-groovy">// Stateless: Each call is independent, no state tracking
bitbucketApiHelper(
    bitbucketApiLibrary.createBuildStatusForCommit(Status.COMMIT_STATUS.SUCCESSFUL, '✅ Success')
)

// Stateful would require:
class PullRequest {
    PRId id
    Status previousStatus

    void updateStatus(newStatus) {
        if (previousStatus == FAILED &amp;&amp; newStatus == SUCCESS) {
            notifyRecovery()  // Behavior depends on previous state
        }
        previousStatus = newStatus
    }
}
</code></pre>
<hr />
<h2 id="why-strategic-design-patterns-were-not-applied">Why Strategic Design Patterns Were Not Applied</h2>
<h3 id="bounded-context">Bounded Context</h3>
<p><strong>Bounded Context</strong> applies when:
- Multiple teams with different models
- Separate applications or services
- Different codebases, databases</p>
<p><strong>Not applicable here:</strong>
- Single team maintains all code
- Single codebase (Jenkins shared library)
- No need for model translation between contexts</p>
<p><strong>Note:</strong> The utility libraries (Git, Shell, SSH) are <strong>Modules</strong>, not Bounded Contexts. They share the same team, codebase, and ubiquitous language.</p>
<hr />
<h2 id="before-vs-after-comparison">Before vs After Comparison</h2>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Before (74fc356)</th>
<th>After (ff74ac8)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Structure</strong></td>
<td>Flat <code>groovy/</code> folder</td>
<td>4-layer <code>sharedLibraries/</code></td>
</tr>
<tr>
<td><strong>Git operations</strong></td>
<td>Mixed in generalHelper</td>
<td>Separated to GitLibrary (23 ops)</td>
</tr>
<tr>
<td><strong>Shell operations</strong></td>
<td>Mixed in generalHelper</td>
<td>Separated to ShellLibrary (15 ops)</td>
</tr>
<tr>
<td><strong>SSH operations</strong></td>
<td>Mixed in generalHelper</td>
<td>Separated to SSHShellLibrary (8 ops)</td>
</tr>
<tr>
<td><strong>Stage logic</strong></td>
<td>Directly in Jenkinsfile</td>
<td>Extracted to vars/stage*.groovy</td>
</tr>
<tr>
<td><strong>Logging</strong></td>
<td>Ad-hoc echo statements</td>
<td>Centralized logger.groovy</td>
</tr>
<tr>
<td><strong>API calls</strong></td>
<td>Python script dependency</td>
<td>Native Groovy BitbucketApiService</td>
</tr>
<tr>
<td><strong>Commits</strong></td>
<td>89</td>
<td>308</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="summary">Summary</h2>
<h3 id="patterns-applied">Patterns Applied</h3>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Category</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Layered Architecture</strong></td>
<td>DDD Building Blocks</td>
<td>4-layer: Entry → Orchestration → Infrastructure → Module</td>
</tr>
<tr>
<td><strong>Modules</strong></td>
<td>DDD Building Blocks</td>
<td>GitLibrary, ShellLibrary, SSHShellLibrary, bitbucketApiLibrary</td>
</tr>
</tbody>
</table>
<h3 id="patterns-partially-aligned">Patterns Partially Aligned</h3>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Category</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Infrastructure Service</strong></td>
<td>DDD Building Blocks</td>
<td>Concept exists, implemented as GoF Facade pattern</td>
</tr>
</tbody>
</table>
<h3 id="patterns-not-applied">Patterns Not Applied</h3>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Category</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Intention-Revealing Interfaces</strong></td>
<td>DDD Supple Design</td>
<td>Names expose implementation (git commands)</td>
</tr>
<tr>
<td><strong>Entities, Aggregates</strong></td>
<td>DDD Building Blocks</td>
<td>Stateless pipeline environment</td>
</tr>
<tr>
<td><strong>Domain Services</strong></td>
<td>DDD Building Blocks</td>
<td>No domain logic requiring coordination between Entities/Value Objects</td>
</tr>
<tr>
<td><strong>Bounded Contexts</strong></td>
<td>DDD Strategic Design</td>
<td>Single team, single codebase</td>
</tr>
<tr>
<td><strong>Context Mapping</strong></td>
<td>DDD Strategic Design</td>
<td>No multiple contexts to integrate</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="references">References</h2>
<ul>
<li>Evans, Eric. <em>Domain-Driven Design: Tackling Complexity in the Heart of Software</em>. Addison-Wesley, 2003.</li>
<li>Evans, Eric. <em>Domain-Driven Design Reference</em>. Domain Language, Inc., 2015. (CC BY 4.0)</li>
<li>Gamma, Erich, et al. <em>Design Patterns: Elements of Reusable Object-Oriented Software</em>. Addison-Wesley, 1994. (Facade pattern)</li>
<li><a href="https://martinfowler.com/bliki/BoundedContext.html">Martin Fowler - Bounded Context</a></li>
</ul>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-groovy.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js"></script>
  
  <script src="../../js/nav.js"></script>
</body>
</html>