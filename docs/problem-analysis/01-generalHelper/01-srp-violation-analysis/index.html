<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="**"Kitchen Sink" File** - Actual cohesion only 19% compared to design intent (common function collection) (656 lines)">
  <meta name="author" content="Jindo Kim">
  <title>groovy/generalHelper.groovy - SRP Violation Analysis | Post-Refactoring Analysis</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Mono:wght@400;700&display=swap">
  <link rel="stylesheet" href="../../../css/portfolio-theme.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
  <!-- Mobile hamburger -->
  <button class="nav-toggle" aria-label="Toggle navigation">
    <span></span><span></span><span></span>
  </button>

  <!-- Sidebar overlay (mobile) -->
  <div class="nav-overlay"></div>

  <!-- Sidebar navigation -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <a href="../../../">Post-Refactoring Analysis</a>
    </div>
    <div class="sidebar-content">
      <ul class="nav-tree"><li class="nav-depth-1"><a href="../../../" class="nav-link">Home</a></li><li class="nav-depth-1"><button class="nav-section-btn expanded">Problem Analysis</button><ul class="nav-children"><li class="nav-depth-2"><a href="../../../problem-analysis/problem-analysis-overview/" class="nav-link">Problem Analysis Overview</a></li><li class="nav-depth-2"><a href="../../../problem-analysis/detailed-analysis/" class="nav-link">Detailed Analysis</a></li><li class="nav-depth-2"><a href="../../../problem-analysis/architecture-smells-analysis/" class="nav-link">Architecture Smells Analysis</a></li><li class="nav-depth-2"><a href="../../../problem-analysis/DRY-violation-analysis/" class="nav-link">DRY Violation Analysis</a></li><li class="nav-depth-2"><button class="nav-section-btn">Pipeline Sequence Diagrams</button><ul class="nav-children"><li class="nav-depth-3"><a href="../../../problem-analysis/pipeline-sequence-diagrams/domain-mapping/" class="nav-link">Domain Mapping</a></li><li class="nav-depth-3"><a href="../../../problem-analysis/pipeline-sequence-diagrams/dlx-ci/" class="nav-link">DLXJenkins CI</a></li><li class="nav-depth-3"><a href="../../../problem-analysis/pipeline-sequence-diagrams/dlx-cd/" class="nav-link">DLXJenkins CD</a></li><li class="nav-depth-3"><a href="../../../problem-analysis/pipeline-sequence-diagrams/js-ci/" class="nav-link">JsJenkins CI</a></li><li class="nav-depth-3"><a href="../../../problem-analysis/pipeline-sequence-diagrams/js-cd/" class="nav-link">JsJenkins CD</a></li><li class="nav-depth-3"><a href="../../../problem-analysis/pipeline-sequence-diagrams/jenkins-ci/" class="nav-link">PipelineForJenkins CI</a></li></ul></li><li class="nav-depth-2"><button class="nav-section-btn expanded">Per-File Analysis</button><ul class="nav-children"><li class="nav-depth-3"><button class="nav-section-btn expanded">generalHelper</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../../problem-analysis/01-generalHelper/01-srp-violation-analysis/" class="nav-link active">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/01-generalHelper/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/01-generalHelper/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">jsHelper</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../../problem-analysis/02-jsHelper/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/02-jsHelper/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/02-jsHelper/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">unityHelper</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../../problem-analysis/03-unityHelper/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/03-unityHelper/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/03-unityHelper/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">DLXJenkins-Jenkinsfile</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../../problem-analysis/04-DLXJenkins-Jenkinsfile/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/04-DLXJenkins-Jenkinsfile/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/04-DLXJenkins-Jenkinsfile/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">DLXJenkins-JenkinsfileDeployment</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../../problem-analysis/05-DLXJenkins-JenkinsfileDeployment/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/05-DLXJenkins-JenkinsfileDeployment/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/05-DLXJenkins-JenkinsfileDeployment/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">JsJenkins-Jenkinsfile</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../../problem-analysis/06-JsJenkins-Jenkinsfile/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/06-JsJenkins-Jenkinsfile/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/06-JsJenkins-Jenkinsfile/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">JsJenkins-JenkinsfileDeployment</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../../problem-analysis/07-JsJenkins-JenkinsfileDeployment/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/07-JsJenkins-JenkinsfileDeployment/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/07-JsJenkins-JenkinsfileDeployment/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li><li class="nav-depth-3"><button class="nav-section-btn">PipelineForJenkins-Jenkinsfile</button><ul class="nav-children"><li class="nav-depth-4"><a href="../../../problem-analysis/08-PipelineForJenkins-Jenkinsfile/01-srp-violation-analysis/" class="nav-link">SRP Violation Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/08-PipelineForJenkins-Jenkinsfile/02-software-smells-analysis/" class="nav-link">Software Smells Analysis</a></li><li class="nav-depth-4"><a href="../../../problem-analysis/08-PipelineForJenkins-Jenkinsfile/03-design-smells-symptoms/" class="nav-link">Design Smells Analysis</a></li></ul></li></ul></li></ul></li><li class="nav-depth-1"><button class="nav-section-btn">Problem Solving</button><ul class="nav-children"><li class="nav-depth-2"><a href="../../../problem-solving/solution-overview/" class="nav-link">Solution Overview</a></li><li class="nav-depth-2"><a href="../../../problem-solving/solution-by-layer/" class="nav-link">Solution by Layer</a></li><li class="nav-depth-2"><a href="../../../problem-solving/solution-by-feature/" class="nav-link">Solution by Feature</a></li><li class="nav-depth-2"><a href="../../../problem-solving/logger-system-design-integration/" class="nav-link">Logger System Design and Integration</a></li><li class="nav-depth-2"><a href="../../../problem-solving/domain-driven-analysis/" class="nav-link">Domain-Driven Analysis</a></li><li class="nav-depth-2"><a href="../../../problem-solving/jenkins-cps-serialization-diagram/" class="nav-link">Jenkins CPS Serialization Diagram</a></li><li class="nav-depth-2"><a href="../../../problem-solving/pull-request-documentation/" class="nav-link">Pull Request Documentation</a></li><li class="nav-depth-2"><button class="nav-section-btn">Implementation Phases</button><ul class="nav-children"><li class="nav-depth-3"><a href="../../../problem-solving/phase-0-global-trusted-shared-library-setup/changelog/" class="nav-link">Phase 0 - Global Trusted Shared Library Setup</a></li><li class="nav-depth-3"><a href="../../../problem-solving/phase-1-shellscript-modularization-and-initialization-stage/changelog/" class="nav-link">Phase 1 - Shell Script Modularization and Initialization Stage</a></li><li class="nav-depth-3"><a href="../../../problem-solving/phase-2-3-level-logger-system-implementation/changelog/" class="nav-link">Phase 2 - 3-Level Logger System Implementation</a></li><li class="nav-depth-3"><a href="../../../problem-solving/phase-3-bitbucket-api-and-shell-library-integration/changelog/" class="nav-link">Phase 3 - Bitbucket API and Shell Library Integration</a></li><li class="nav-depth-3"><a href="../../../problem-solving/phase-4-full-pipeline-refactoring-and-stage-modularization/changelog/" class="nav-link">Phase 4 - Full Pipeline Refactoring and Stage Modularization</a></li></ul></li></ul></li></ul>
    </div>
  </nav>

  <!-- Main content -->
  <main class="content">
    <div class="container">
      <p><a href="../../../problem-analysis/detailed-analysis/">← Overview</a> | <a href="../../../problem-analysis/01-generalHelper/02-software-smells-analysis/">Software Smells →</a></p>
<h1 id="groovygeneralhelpergroovy-srp-violation-analysis">groovy/generalHelper.groovy - SRP Violation Analysis</h1>
<blockquote>
<p><strong>"Kitchen Sink" File</strong> - Actual cohesion only 19% compared to design intent (common function collection) (656 lines)</p>
</blockquote>
<hr />
<h2 id="1-srp-violation-analysis-criteria">1. SRP Violation Analysis Criteria</h2>
<ul>
<li><strong>generalHelper Design Intent</strong>: Since Unity Helper and JS Helper exist separately, generalHelper is designed to "collect only functions commonly used across all pipelines"</li>
<li><strong>Cohesion Analysis Criteria</strong>: "Is it actually used in all pipelines?" = Cohesion aligned with design intent</li>
</ul>
<h3 id="11-why-this-criteria">1.1. Why This Criteria?</h3>
<p>SRP asks "who requests changes to this code?" For a shared helper file, 
the answer should be "everyone equally." If only specific pipelines use 
a function, it belongs in that pipeline's dedicated helper, not here.</p>
<p>Call counts (how many times) don't matter for this judgment - 
only pipeline coverage (how many pipelines) does.</p>
<h3 id="12-solid-principles-references">1.2. SOLID Principles References</h3>
<h4 id="sources">Sources</h4>
<ol>
<li><strong>97 Things Every Programmer Should Know</strong> (O'Reilly, 2010)</li>
<li>
<p>Chapter 76: "The Single Responsibility Principle" by Uncle Bob</p>
</li>
<li>
<p><strong>Agile Principles, Patterns, and Practices in C#</strong> by Robert C. Martin (2006)</p>
</li>
<li>Chapter 8: "The Single-Responsibility Principle (SRP)"</li>
</ol>
<hr />
<h2 id="2-cohesion-and-change-reasons-per-function">2. Cohesion and Change Reasons per Function</h2>
<table>
<thead>
<tr>
<th>#</th>
<th>Function Name</th>
<th style="text-align: center;">DLX CI</th>
<th style="text-align: center;">DLX CD</th>
<th style="text-align: center;">JS CI</th>
<th style="text-align: center;">JS CD</th>
<th style="text-align: center;">Pipeline</th>
<th style="text-align: center;">Internal</th>
<th>Change Reason</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>parseJson</code></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;"></td>
<td>When Jenkins build/stage result constants are added/changed</td>
</tr>
<tr>
<td>2</td>
<td><code>logMessage</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">16</td>
<td>When logging output format/style changes (internal use)</td>
</tr>
<tr>
<td>3</td>
<td><code>cloneOrUpdateRepo</code></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td>When Git CLI commands, repository cleanup policies change</td>
</tr>
<tr>
<td>4</td>
<td><code>getDefaultBranch</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td>When Git remote command output format changes (internal use)</td>
</tr>
<tr>
<td>5</td>
<td><code>initializeEnvironment</code></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td><strong>2 reasons</strong>:<br>When Bitbucket status API changes<br>When environment variable setup method changes</td>
</tr>
<tr>
<td>6</td>
<td><code>checkoutBranch</code></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td>When Git checkout/reset/clean workflow changes</td>
</tr>
<tr>
<td>7</td>
<td><code>mergeBranchIfNeeded</code></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td>When Git merge strategy/workflow changes</td>
</tr>
<tr>
<td>8</td>
<td><code>isBranchUpToDateWithRemote</code></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td>When Git fetch/rev-parse commands change</td>
</tr>
<tr>
<td>9</td>
<td><code>isBranchUpToDateWithMain</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td>When Git merge-base command changes (internal use)</td>
</tr>
<tr>
<td>10</td>
<td><code>tryMerge</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td>When Git merge command/options change (internal use)</td>
</tr>
<tr>
<td>11</td>
<td><code>getFullCommitHash</code></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td>When Bitbucket API (Python script) interface changes</td>
</tr>
<tr>
<td>12</td>
<td><code>getCurrentCommitHash</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td>When Git rev-parse command changes (<strong>Dead Code</strong>)</td>
</tr>
<tr>
<td>13</td>
<td><code>sendBuildStatus</code></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">1</td>
<td>When Bitbucket build status API spec changes</td>
</tr>
<tr>
<td>14</td>
<td><code>parseTicketNumber</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td>When branch naming convention (ticket pattern) changes</td>
</tr>
<tr>
<td>15</td>
<td><code>publishTestResultsHtmlToWebServer</code></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td>When web server path/permission policy, SSH settings change</td>
</tr>
<tr>
<td>16</td>
<td><code>publishBuildResultsToWebServer</code></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td>When web server deployment path structure changes</td>
</tr>
<tr>
<td>17</td>
<td><code>cleanMergedBranchFromWebServer</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td>When web server cleanup path policy changes</td>
</tr>
<tr>
<td>18</td>
<td><code>cleanUpPRBranch</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td><strong>2 reasons</strong>:<br>When Linux package management method changes<br>When directory cleanup policy changes</td>
</tr>
<tr>
<td>19</td>
<td><code>closeLogfiles</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td>When lsof output format, process termination method changes (<strong>Dead Code</strong>)</td>
</tr>
<tr>
<td>20</td>
<td><code>checkQualityGateStatus</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td><strong>2 reasons</strong>:<br>When SonarQube API changes<br>When polling/retry strategy changes</td>
</tr>
<tr>
<td>21</td>
<td><code>publishGroovyDocToWebServer</code></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td>When GroovyDoc deployment path/permission policy changes</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note on Call Counts</strong>: 
The numbers indicate how many times each function is called per pipeline. 
High call counts (e.g., <code>sendBuildStatus</code>: 4 times in DLX CD) may suggest 
insufficient abstraction in the <strong>calling side</strong> (pipeline files), 
not in the helper itself. This is analyzed in the pipeline file analysis (04-08).</p>
</blockquote>
<hr />
<h2 id="3-module-level-srp-violation-analysis-cohesion-analysis-results">3. Module Level SRP Violation Analysis - Cohesion Analysis Results</h2>
<ul>
<li><strong>100% Usage (4)</strong>: <code>parseJson</code>, <code>checkoutBranch</code>, <code>getFullCommitHash</code>, <code>sendBuildStatus</code></li>
<li><strong>60% Usage (4)</strong>: <code>cloneOrUpdateRepo</code>, <code>initializeEnvironment</code>, <code>isBranchUpToDateWithRemote</code>, <code>checkQualityGateStatus</code></li>
<li><strong>40% Usage (2)</strong>: <code>mergeBranchIfNeeded</code>, <code>publishTestResultsHtmlToWebServer</code></li>
<li><strong>20% Usage (5)</strong>: <code>publishBuildResultsToWebServer</code>, <code>cleanMergedBranchFromWebServer</code>, <code>cleanUpPRBranch</code>, <code>publishGroovyDocToWebServer</code>, <code>parseTicketNumber</code></li>
<li><strong>Dead Code (2)</strong>: <code>getCurrentCommitHash</code>, <code>closeLogfiles</code></li>
<li><strong>Internal Use Only (4)</strong>: <code>logMessage</code>, <code>getDefaultBranch</code>, <code>isBranchUpToDateWithMain</code>, <code>tryMerge</code></li>
</ul>
<blockquote>
<p><strong>SRP Violation</strong>: Contrary to the design intent of "common function collection", only <strong>4 out of 21 functions (19%) are 100% reused</strong>. The remaining 81% are used only in specific pipelines.</p>
</blockquote>
<hr />
<h2 id="4-function-level-srp-violation-analysis-functions-with-multiple-change-reasons">4. Function Level SRP Violation Analysis - Functions with Multiple Change Reasons</h2>
<details>
<summary>Multi-responsibility Function: <code>initializeEnvironment()</code> (2 change reasons)</summary>
<pre><code class="language-groovy">void initializeEnvironment(String workspace, String commitHash, String prBranch) {
    echo &quot;Sending 'In Progress' status to Bitbucket...&quot;
    sendBuildStatus(workspace, 'INPROGRESS', commitHash)  // Change reason 1: Bitbucket status API
    env.TICKET_NUMBER = parseTicketNumber(prBranch)       // Change reason 2: Environment variable setup
    env.FOLDER_NAME = &quot;${JOB_NAME}&quot;.split('/').first()
}
</code></pre>
<p><strong>Change Reason Analysis:</strong>
1. <strong>When Bitbucket status API changes</strong> (line 137): <code>sendBuildStatus()</code> call method
2. <strong>When environment variable setup method changes</strong> (lines 138-139): <code>TICKET_NUMBER</code>, <code>FOLDER_NAME</code> setup</p>
</details>
<details>
<summary>Multi-responsibility Function: <code>cleanUpPRBranch()</code> (2 change reasons)</summary>
<pre><code class="language-groovy">void cleanUpPRBranch(String prBranch) {
    // Change reason 1: find tool installation (Linux package management)
    def findPath = sh(script: 'command -v find', returnStdout: true).trim()
    if (!findPath) {
        echo &quot;'find' directory searching tool is not found...&quot;
        echo &quot;Installing 'find' directory searching tool...&quot;
        int installStatus = sh(script: 'sudo apt-get update &amp;&amp; sudo apt-get install -y findutils', returnStatus: true)
        if (installStatus == 0 ) {
            echo &quot;The 'findutils' package was installed successfully.&quot;
        } else {
            echo &quot;Failed to install 'findutils'. Exit code: ${installStatus}&quot;
            error &quot;Installation failed with exit code: ${installStatus}&quot;
        }
    }

    // Change reason 2: Directory cleanup policy
    def branchPaths = sh(script: &quot;${findPath} ../ -type d -name \&quot;${prBranch}\&quot;&quot;, returnStdout: true).trim()
    if (!branchPaths.isEmpty()) {
        def paths = branchPaths.split('\n')
        paths.each { branchPath -&gt;
            echo &quot;Deleting Branch Path: ${branchPath}&quot;
            sh(script: &quot;rm -r -f \&quot;${branchPath}\&quot;&quot;, returnStatus: true)
            // ...
        }
    }
}
</code></pre>
<p><strong>Change Reason Analysis:</strong>
1. <strong>When Linux package management method changes</strong> (lines 403-414): <code>apt-get</code> -&gt; other package manager
2. <strong>When directory cleanup policy changes</strong> (lines 417-442): Search path, deletion conditions</p>
</details>
<details>
<summary>Multi-responsibility Function: <code>checkQualityGateStatus()</code> (2 change reasons)</summary>
<pre><code class="language-groovy">Map checkQualityGateStatus(String projectKey, String adminToken) {
    // Change reason 1: SonarQube API (URL, auth, response structure)
    String buildStatusURL = &quot;http://localhost:9000/sonarqube/api/ce/component?component=${projectKey}&quot;
    String qualityGateResultURL = &quot;http://localhost:9000/sonarqube/api/qualitygates/project_status?projectKey=${projectKey}&quot;

    // Change reason 2: Polling/retry strategy
    int maxRetries = 5

    for (int retryCount = 1; retryCount &lt;= maxRetries; retryCount++) {
        def process = buildStatusAPIcall.execute()
        process.waitFor()

        def buildStatus = new JsonSlurperClassic().parseText(buildStatusResponse)
        if (buildStatus?.queue?.size() &gt; 0) {
            sleep(10)  // Change reason 2: Wait time
            continue
        }
        // ...
    }
}
</code></pre>
<p><strong>Change Reason Analysis:</strong>
1. <strong>When SonarQube API changes</strong>: URL, auth method, response structure
2. <strong>When polling/retry strategy changes</strong>: Retry count, wait time, timeout</p>
<p><strong>Additional Code Smell</strong>: Long Method (94 lines)</p>
</details>
<hr />
<h2 id="conclusion">Conclusion</h2>
<blockquote>
<p><strong>SRP Violation</strong>:
- <strong>Module Level</strong>: Only 19% of functions are 100% reused compared to "common function collection" design intent
- <strong>Function Level</strong>: 3 functions have multiple change reasons (<code>initializeEnvironment</code>(2), <code>cleanUpPRBranch</code>(2), <code>checkQualityGateStatus</code>(2))
- 2 Dead Code functions found
- <strong>"Kitchen Sink" Anti-pattern</strong></p>
</blockquote>
<h3 id="next-why-software-smells-analysis">Next: Why Software Smells Analysis?</h3>
<p>SRP analysis identified <strong>what</strong> violates design intent. The next document classifies these violations using industry-standard taxonomy (Fowler, Martin, Suryanarayana) to provide <strong>shared vocabulary</strong> for discussing the problems.</p>
<hr />
<p><a href="../../../problem-analysis/detailed-analysis/">← Overview</a> | <a href="../../../problem-analysis/01-generalHelper/02-software-smells-analysis/">Software Smells →</a></p>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-groovy.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js"></script>
  
  <script src="../../../js/nav.js"></script>
</body>
</html>