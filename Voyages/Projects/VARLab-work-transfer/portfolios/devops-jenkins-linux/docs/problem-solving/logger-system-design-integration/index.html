
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Jenkins refactoring, CI/CD architecture, technical debt, software smells, design patterns, 4-layer architecture, shared library">
      
      
        <meta name="author" content="Jindo Kim">
      
      
      
        <link rel="prev" href="../solution-by-feature/">
      
      
        <link rel="next" href="../domain-driven-analysis/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Logger System Design and Integration - Post-Refactoring Analysis - Intuitive Fixes to Industry Patterns</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#3-level-logger-system-design-integration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Post-Refactoring Analysis - Intuitive Fixes to Industry Patterns" class="md-header__button md-logo" aria-label="Post-Refactoring Analysis - Intuitive Fixes to Industry Patterns" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Post-Refactoring Analysis - Intuitive Fixes to Industry Patterns
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Logger System Design and Integration
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Post-Refactoring Analysis - Intuitive Fixes to Industry Patterns" class="md-nav__button md-logo" aria-label="Post-Refactoring Analysis - Intuitive Fixes to Industry Patterns" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Post-Refactoring Analysis - Intuitive Fixes to Industry Patterns
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Problem Analysis
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Problem Analysis
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/problem-analysis-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Problem Analysis Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/detailed-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Detailed Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/architecture-smells-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/DRY-violation-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DRY Violation Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Pipeline Sequence Diagrams
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Pipeline Sequence Diagrams
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/pipeline-sequence-diagrams/domain-mapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain Mapping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/pipeline-sequence-diagrams/dlx-ci/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DLXJenkins CI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/pipeline-sequence-diagrams/dlx-cd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DLXJenkins CD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/pipeline-sequence-diagrams/js-ci/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JsJenkins CI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/pipeline-sequence-diagrams/js-cd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JsJenkins CD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/pipeline-sequence-diagrams/jenkins-ci/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PipelineForJenkins CI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Per-File Analysis
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Per-File Analysis
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_1" >
        
          
          <label class="md-nav__link" for="__nav_2_6_1" id="__nav_2_6_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    generalHelper
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    generalHelper
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/01-generalHelper/01-srp-violation-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SRP Violation Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/01-generalHelper/02-software-smells-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Software Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/01-generalHelper/03-design-smells-symptoms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2" >
        
          
          <label class="md-nav__link" for="__nav_2_6_2" id="__nav_2_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    jsHelper
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    jsHelper
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/02-jsHelper/01-srp-violation-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SRP Violation Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/02-jsHelper/02-software-smells-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Software Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/02-jsHelper/03-design-smells-symptoms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_3" >
        
          
          <label class="md-nav__link" for="__nav_2_6_3" id="__nav_2_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    unityHelper
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    unityHelper
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/03-unityHelper/01-srp-violation-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SRP Violation Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/03-unityHelper/02-software-smells-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Software Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/03-unityHelper/03-design-smells-symptoms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_4" >
        
          
          <label class="md-nav__link" for="__nav_2_6_4" id="__nav_2_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    DLXJenkins-Jenkinsfile
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    DLXJenkins-Jenkinsfile
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/04-DLXJenkins-Jenkinsfile/01-srp-violation-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SRP Violation Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/04-DLXJenkins-Jenkinsfile/02-software-smells-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Software Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/04-DLXJenkins-Jenkinsfile/03-design-smells-symptoms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_5" >
        
          
          <label class="md-nav__link" for="__nav_2_6_5" id="__nav_2_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    DLXJenkins-JenkinsfileDeployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    DLXJenkins-JenkinsfileDeployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/05-DLXJenkins-JenkinsfileDeployment/01-srp-violation-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SRP Violation Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/05-DLXJenkins-JenkinsfileDeployment/02-software-smells-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Software Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/05-DLXJenkins-JenkinsfileDeployment/03-design-smells-symptoms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6_6" id="__nav_2_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    JsJenkins-Jenkinsfile
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    JsJenkins-Jenkinsfile
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/06-JsJenkins-Jenkinsfile/01-srp-violation-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SRP Violation Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/06-JsJenkins-Jenkinsfile/02-software-smells-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Software Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/06-JsJenkins-Jenkinsfile/03-design-smells-symptoms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_7" >
        
          
          <label class="md-nav__link" for="__nav_2_6_7" id="__nav_2_6_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    JsJenkins-JenkinsfileDeployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    JsJenkins-JenkinsfileDeployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/07-JsJenkins-JenkinsfileDeployment/01-srp-violation-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SRP Violation Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/07-JsJenkins-JenkinsfileDeployment/02-software-smells-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Software Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/07-JsJenkins-JenkinsfileDeployment/03-design-smells-symptoms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_8" >
        
          
          <label class="md-nav__link" for="__nav_2_6_8" id="__nav_2_6_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    PipelineForJenkins-Jenkinsfile
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    PipelineForJenkins-Jenkinsfile
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/08-PipelineForJenkins-Jenkinsfile/01-srp-violation-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SRP Violation Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/08-PipelineForJenkins-Jenkinsfile/02-software-smells-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Software Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../problem-analysis/08-PipelineForJenkins-Jenkinsfile/03-design-smells-symptoms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Smells Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Problem Solving
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Problem Solving
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../solution-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Solution Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../solution-by-layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Solution by Layer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../solution-by-feature/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Solution by Feature
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Logger System Design and Integration
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Logger System Design and Integration
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-design-background" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Design Background
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-architecture-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Architecture Integration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-beforeafter-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Before/After Comparison
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reference
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../domain-driven-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain-Driven Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jenkins-cps-serialization-diagram/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Jenkins CPS Serialization Diagram
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pull-request-documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pull Request Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Implementation Phases
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Implementation Phases
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../phase-0-global-trusted-shared-library-setup/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phase 0 - Global Trusted Shared Library Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../phase-1-shellscript-modularization-and-initialization-stage/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phase 1 - Shell Script Modularization and Initialization Stage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../phase-2-3-level-logger-system-implementation/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phase 2 - 3-Level Logger System Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../phase-3-bitbucket-api-and-shell-library-integration/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phase 3 - Bitbucket API and Shell Library Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../phase-4-full-pipeline-refactoring-and-stage-modularization/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phase 4 - Full Pipeline Refactoring and Stage Modularization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="3-level-logger-system-design-integration">3-Level Logger System Design &amp; Integration</h1>
<blockquote>
<p>Hierarchical logging system design for consistent logging in Jenkins Pipeline</p>
</blockquote>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#1-design-background">Design Background</a></li>
<li><a href="#11-problem-issues-with-existing-logging">Problem: Issues with Existing Logging</a><ul>
<li><a href="#111-problem-summary">Problem Summary</a></li>
<li><a href="#112-lack-of-consistency">Lack of Consistency</a></li>
<li><a href="#113-lack-of-structure-cognitive-chunking-impossible">Lack of Structure: Cognitive Chunking Impossible</a></li>
<li><a href="#114-jenkins-logging-system-limitations">Jenkins Logging System Limitations</a></li>
<li><a href="#115-code-duplication-dry-violation">Code Duplication (DRY Violation)</a></li>
</ul>
</li>
<li><a href="#12-solution-discovering-chunking-units-steps-group">Solution: Discovering Chunking Units (Steps Group)</a><ul>
<li><a href="#121-what-is-steps-group">What is Steps Group?</a></li>
<li><a href="#122-3-level-logger-design">3-Level Logger Design</a></li>
<li><a href="#123-design-result-logging-responsibility-distribution-by-layer">Design Result: Logging Responsibility Distribution by Layer</a></li>
</ul>
</li>
<li><a href="#2-architecture-integration">Architecture Integration</a></li>
<li><a href="#21-position-within-4-layer-architecture">Position within 4-Layer Architecture</a></li>
<li><a href="#22-library-helper-auto-logging-integration">Library-Helper Auto Logging Integration</a><ul>
<li><a href="#221-embedding-logging-metadata-in-library">Embedding Logging Metadata in Library</a></li>
<li><a href="#222-helper-auto-logging-with-metadata">Helper Auto Logging with Metadata</a></li>
</ul>
</li>
<li><a href="#23-integration-with-shellscripthelper">Integration with shellScriptHelper</a></li>
<li><a href="#3-beforeafter-comparison">Before/After Comparison</a></li>
</ul>
<hr />
<h2 id="1-design-background">1. Design Background</h2>
<h3 id="11-problem-issues-with-existing-logging">1.1 Problem: Issues with Existing Logging</h3>
<h4 id="111-problem-summary">1.1.1 Problem Summary</h4>
<table>
<thead>
<tr>
<th>#</th>
<th>Problem</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><strong>Lack of Consistency</strong></td>
<td>Different logging formats in each file</td>
</tr>
<tr>
<td>2</td>
<td><strong>Lack of Structure</strong></td>
<td>No cognitive chunking unit besides Stage</td>
</tr>
<tr>
<td>3</td>
<td><strong>Jenkins Output Constraints</strong></td>
<td>Format customization impossible due to CPS/Sandbox</td>
</tr>
<tr>
<td>4</td>
<td><strong>Code Duplication</strong></td>
<td><code>logMessage()</code> function copied across multiple files</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="112-lack-of-consistency">1.1.2 Lack of Consistency</h4>
<p>Different logging methods in each file:</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Logging Method</th>
<th>Problem</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>generalHelper.groovy</code></td>
<td><code>logMessage()</code> function</td>
<td>Self-implemented</td>
</tr>
<tr>
<td><code>jsHelper.groovy</code></td>
<td><code>logMessage()</code> function</td>
<td>Same copy as generalHelper (DRY violation)</td>
</tr>
<tr>
<td><code>Jenkinsfile</code></td>
<td>Direct <code>echo</code> call</td>
<td>No format</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="113-lack-of-structure-cognitive-chunking-impossible">1.1.3 Lack of Structure: Cognitive Chunking Impossible</h4>
<p><strong>Problem</strong>: In the entire Pipeline, except for <code>Stage</code>, <strong>there is no conceptual distinction useful for human recognition</strong></p>
<blockquote>
<p>In cognitive psychology, <strong>Chunking</strong> is a strategy for processing information by grouping it into meaningful units. The clearer the boundary, the faster and easier it is to receive information.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Current State</th>
<th>Problem</th>
</tr>
</thead>
<tbody>
<tr>
<td>Stage ‚Üí (all logs listed flat)</td>
<td>Dozens of lines of logs without intermediate units</td>
</tr>
<tr>
<td>Individual Steps listed</td>
<td>Cannot distinguish logical task groups</td>
</tr>
<tr>
<td>When error occurs</td>
<td>Difficult to trace "where did the error occur?"</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="114-jenkins-logging-system-limitations">1.1.4 Jenkins Logging System Limitations</h4>
<h5 id="1141-same-echo-call-simultaneous-output-to-two-places">1.1.4.1 Same echo Call ‚Üí Simultaneous Output to Two Places</h5>
<table>
<thead>
<tr>
<th style="text-align: center;">Stage View (actual screenshot)</th>
<th style="text-align: center;">Console Output (example)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img alt="Stage View - scattered echo" src="../../resources/stage-logger-before.png" /></td>
<td style="text-align: center;"><img alt="Console Output" src="../../resources/console-log-view-example.png" /></td>
</tr>
<tr>
<td style="text-align: center;">Log visible in Pipeline Stage UI</td>
<td style="text-align: center;">Same log example visible in Console Log</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Core Problem</strong>: A single <code>echo</code> call outputs to <strong>both</strong> Stage View and Console Output, and <strong>neither can customize the format</strong></p>
</blockquote>
<h5 id="1142-output-flow">1.1.4.2 Output Flow</h5>
<pre class="mermaid"><code>flowchart LR
    subgraph Groovy["Pipeline Script"]
        ECHO["echo 'message'"]
        SH["sh 'command'"]
    end

    subgraph Jenkins["Jenkins Internal"]
        CPS["CPS Transform"]
        LOG["Console Logger"]
    end

    subgraph Output["Output (Fixed Format)"]
        STAGE["Stage View"]
        CONSOLE["Console Output"]
    end

    ECHO --&gt; CPS
    SH --&gt; CPS
    CPS --&gt; LOG
    LOG --&gt; STAGE
    LOG --&gt; CONSOLE

    style CPS fill:#ff6b6b,stroke:#333
    style LOG fill:#ff6b6b,stroke:#333</code></pre>
<h5 id="1143-constraints">1.1.4.3 Constraints</h5>
<table>
<thead>
<tr>
<th>Constraint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fixed format</td>
<td>Timestamp + <code>[Pipeline]</code> marker + message mixed</td>
</tr>
<tr>
<td>Flat structure</td>
<td>All <code>echo</code>, <code>sh</code> commands listed at the same level</td>
</tr>
<tr>
<td>No customization</td>
<td>Jenkins Content Security Policy enforces UI output format</td>
</tr>
<tr>
<td>No hierarchy</td>
<td>Difficult to find specific tasks in long logs</td>
</tr>
</tbody>
</table>
<h5 id="1144-jenkins-content-security-policy-constraints-reference">1.1.4.4 Jenkins Content Security Policy Constraints (Reference)</h5>
<p>Jenkins applies a <strong>restrictive Content Security Policy</strong> by default to prevent XSS attacks:</p>
<blockquote>
<p>Do not use inline JavaScript (JS) in the Jenkins GUI, i.e., JS embedded in HTML output.</p>
<p>‚Äî <a href="https://www.jenkins.io/doc/developer/security/csp/">Jenkins Developer: Content-Security-Policy Compatibility</a></p>
</blockquote>
<ul>
<li>Default CSP: <code>default-src 'none'</code> - blocks scripts, fonts, iframes, etc.</li>
<li>Cannot customize Console Output UI (requires system property modification with admin privileges)</li>
<li><code>echo</code> and <code>println</code> are processed identically internally by Jenkins (<a href="https://groups.google.com/g/jenkinsci-users/c/Bing10GEyhs">reference</a>)</li>
</ul>
<hr />
<h4 id="115-code-duplication-dry-violation">1.1.5 Code Duplication (DRY Violation)</h4>
<div class="highlight"><pre><span></span><code><span class="c1">// generalHelper.groovy line 35-44</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">logMessage</span><span class="o">(</span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="o">}</span>

<span class="c1">// jsHelper.groovy line 7-16 (exact same copy)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">logMessage</span><span class="o">(</span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="o">}</span>
</code></pre></div>
<hr />
<h3 id="12-solution-discovering-chunking-units-steps-group">1.2 Solution: Discovering Chunking Units (Steps Group)</h3>
<h4 id="121-what-is-steps-group">1.2.1 What is Steps Group?</h4>
<p>A group where multiple Steps come together to form a <strong>meaningful unit of work</strong> (Task).</p>
<div class="highlight"><pre><span></span><code>Stage: Jenkins Initialization
‚îÇ
‚îú‚îÄ‚îÄ Steps Group: &quot;Set Up Environment Variables&quot;  ‚Üê Meaningful unit of work
‚îÇ   ‚îú‚îÄ‚îÄ Step: Configure Report Directory
‚îÇ   ‚îú‚îÄ‚îÄ Step: Extract ticket number
‚îÇ   ‚îî‚îÄ‚îÄ Step: Set build parameters
‚îÇ
‚îî‚îÄ‚îÄ Steps Group: &quot;Send Build Status&quot;             ‚Üê Meaningful unit of work
    ‚îú‚îÄ‚îÄ Step: Prepare API request
    ‚îî‚îÄ‚îÄ Step: POST to Bitbucket API
</code></pre></div>
<h4 id="122-3-level-logger-design">1.2.2 3-Level Logger Design</h4>
<p><strong>Jenkins Provides vs What's Needed:</strong></p>
<table>
<thead>
<tr>
<th>Jenkins Default</th>
<th>Actually Needed</th>
</tr>
</thead>
<tbody>
<tr>
<td>Stage Level: <code>stage('name') { ... }</code></td>
<td>Stage Level</td>
</tr>
<tr>
<td>(None)</td>
<td><strong>Steps Group Level</strong> ‚Üê Newly introduced</td>
</tr>
<tr>
<td>Step Level: <code>sh</code>, <code>echo</code>, <code>withCredentials</code>, etc.</td>
<td>Step Level</td>
</tr>
</tbody>
</table>
<p><strong>Conclusion</strong>: <strong>Steps Group</strong> level is needed between Stage and Step</p>
<p><strong>3-Level Structure:</strong></p>
<div class="highlight"><pre><span></span><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Level 1: Stage                                              ‚îÇ
‚îÇ ===== STAGE Starting: [ Jenkins Initialization ] =====      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Level 2: Steps Group                                        ‚îÇ
‚îÇ --- STEPS Starting Group: [ Set Up Environment ] ---        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Level 3: Step (by status)                                   ‚îÇ
‚îÇ ‚û°Ô∏è Step Starting: [ Configure Report Directory ]...         ‚îÇ
‚îÇ üí¨ Step Info: [ REPORT_DIR: /workspace/PRJob ]              ‚îÇ
‚îÇ üèÉ Step Processing: [ Fetching origin branches ]            ‚îÇ
‚îÇ ‚úÖ Step Completed: [ Configure Report Directory ]           ‚îÇ
‚îÇ ‚ö†Ô∏è Step Warning: [ Branch not found, using default ]        ‚îÇ
‚îÇ ‚ùå Step Failed: [ Git fetch failed ]                        ‚îÇ
‚îÇ üî• Step Error: [ Exception occurred ]                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</code></pre></div>
<p><strong>Step Status Classification:</strong></p>
<table>
<thead>
<tr>
<th>Status</th>
<th>Emoji</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>Starting</td>
<td>‚û°Ô∏è</td>
<td>Task start notification</td>
</tr>
<tr>
<td>Info</td>
<td>üí¨</td>
<td>Informational message (variable values, settings, etc.)</td>
</tr>
<tr>
<td>Processing</td>
<td>üèÉ</td>
<td>Task in progress</td>
</tr>
<tr>
<td>Success</td>
<td>‚úÖ</td>
<td>Task completed successfully</td>
</tr>
<tr>
<td>Warning</td>
<td>‚ö†Ô∏è</td>
<td>Warning (can continue)</td>
</tr>
<tr>
<td>Failed</td>
<td>‚ùå</td>
<td>Task failed (recoverable)</td>
</tr>
<tr>
<td>Error</td>
<td>üî•</td>
<td>Serious error (pipeline stops)</td>
</tr>
</tbody>
</table>
<p><strong>Logger API:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Level 1: Stage</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stageStart</span><span class="o">(</span><span class="n">stageName</span><span class="o">)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stageEnd</span><span class="o">(</span><span class="n">stageName</span><span class="o">)</span>

<span class="c1">// Level 2: Steps Group</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stepsGroupStart</span><span class="o">(</span><span class="n">groupName</span><span class="o">)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stepsGroupEnd</span><span class="o">(</span><span class="n">groupName</span><span class="o">)</span>

<span class="c1">// Level 3: Step (by status)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stepStart</span><span class="o">(</span><span class="n">description</span><span class="o">)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stepInfo</span><span class="o">(</span><span class="n">description</span><span class="o">)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stepProcessing</span><span class="o">(</span><span class="n">description</span><span class="o">)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stepSuccess</span><span class="o">(</span><span class="n">description</span><span class="o">)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stepWarning</span><span class="o">(</span><span class="n">description</span><span class="o">)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stepFailed</span><span class="o">(</span><span class="n">description</span><span class="o">)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stepError</span><span class="o">(</span><span class="n">description</span><span class="o">)</span>
<span class="n">logger</span><span class="o">.</span><span class="na">stepError</span><span class="o">(</span><span class="n">description</span><span class="o">,</span><span class="w"> </span><span class="n">Throwable</span><span class="o">)</span><span class="w">  </span><span class="c1">// Including stack trace</span>
</code></pre></div>
<h4 id="123-design-result-logging-responsibility-distribution-by-layer">1.2.3 Design Result: Logging Responsibility Distribution by Layer</h4>
<p>Introduced a <strong>3-Level chunking-based logging system</strong> to the Pipeline domain and integrated with the existing 4-Layer Architecture to implement a systematic solution where <strong>each layer only handles logging responsibility appropriate to its role</strong>.</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Role</th>
<th>Logging Responsibility</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Logger</strong></td>
<td>3-Level chunking system (Stage/Steps Group/Step)</td>
<td>Output format, hierarchy structure definition</td>
</tr>
<tr>
<td><strong>Library</strong></td>
<td>Cognitive classification unit for specific functions within domain</td>
<td>Define <code>label</code> appropriate for that function</td>
</tr>
<tr>
<td><strong>Helper</strong></td>
<td>Domain logic orchestration</td>
<td>Call logger according to orchestration flow</td>
</tr>
<tr>
<td><strong>Stage</strong></td>
<td>Business workflow</td>
<td>Define Steps Group boundaries</td>
</tr>
</tbody>
</table>
<blockquote>
<p>See <a href="#2-architecture-integration">Section 2: Architecture Integration</a> for detailed implementation</p>
</blockquote>
<hr />
<h2 id="2-architecture-integration">2. Architecture Integration</h2>
<h3 id="21-position-within-4-layer-architecture">2.1 Position within 4-Layer Architecture</h3>
<div class="highlight"><pre><span></span><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Layer 1: Entry Point (Jenkinsfile)                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Layer 2: Orchestration (vars/stage*.groovy)                 ‚îÇ
‚îÇ          ‚Üì uses                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Layer 3: Business Logic (src/service/)                      ‚îÇ
‚îÇ          ‚Üì uses                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Layer 4: Infrastructure                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ src/utils/      ‚îÇ src/resource/   ‚îÇ vars/ (Cross)   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ *Library.groovy ‚îÇ Status.groovy   ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ                 ‚îÇ ‚îÇ logger      ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ                 ‚îÇ ‚îÇ bitbucket   ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ                 ‚îÇ ‚îÇ ApiLibrary  ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ                 ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</code></pre></div>
<p><strong>Logger's Position</strong>: Layer 4 (Infrastructure) - Cross-Cutting Concerns</p>
<hr />
<h3 id="22-library-helper-auto-logging-integration">2.2 Library-Helper Auto Logging Integration</h3>
<p>Logger is used system-wide as a <strong>Cross-Cutting Concern</strong>:
- Used by all Stage modules
- shellScriptHelper, bitbucketApiHelper internally use logger (auto logging)
- Single entry point for unified logging format</p>
<h4 id="221-embedding-logging-metadata-in-library">2.2.1 Embedding Logging Metadata in Library</h4>
<h5 id="a-shell-script-logging-integration">(a) Shell Script Logging Integration</h5>
<pre class="mermaid"><code>flowchart LR
    subgraph Libraries["Shell Libraries"]
        GIT[GitLibrary]
        SHL[ShellLibrary]
        SSHL[SSHShellLibrary]
    end

    subgraph Helper["shellScriptHelper"]
        VALIDATE[validateShMap]
        EXEC[execute]
    end

    subgraph Logger["logger"]
        START[stepStart]
        SUCCESS[stepSuccess]
        FAILED[stepFailed]
        RESULT[stepShellExecutedResult]
    end

    GIT --&gt;|"{script, label}"| VALIDATE
    SHL --&gt;|"{script, label}"| VALIDATE
    SSHL --&gt;|"{script, label}"| VALIDATE

    VALIDATE --&gt; START
    VALIDATE --&gt; EXEC
    EXEC --&gt;|success| SUCCESS
    EXEC --&gt;|failure| FAILED
    EXEC --&gt;|result| RESULT</code></pre>
<p><strong>Core Design</strong>: Each Library's closure includes <code>label</code> metadata for Helper to auto-log</p>
<div class="highlight"><pre><span></span><code><span class="c1">// GitLibrary.groovy - Each closure includes script + label</span>
<span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Closure</span><span class="w"> </span><span class="n">FetchOriginReturnStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="o">[</span>
<span class="w">        </span><span class="nl">script:</span><span class="w"> </span><span class="s1">&#39;git fetch origin&#39;</span><span class="o">,</span>
<span class="w">        </span><span class="nl">label:</span><span class="w"> </span><span class="s1">&#39;Fetch all remote branches from origin&#39;</span><span class="o">,</span><span class="w">  </span><span class="c1">// ‚Üê Logging metadata</span>
<span class="w">        </span><span class="nl">returnStatus:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="o">]</span>
<span class="o">}</span>

<span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Closure</span><span class="w"> </span><span class="n">CheckoutBranch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">branchName</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="o">[</span>
<span class="w">        </span><span class="nl">script:</span><span class="w"> </span><span class="s2">&quot;git checkout ${branchName}&quot;</span><span class="o">,</span>
<span class="w">        </span><span class="nl">label:</span><span class="w"> </span><span class="s2">&quot;Checkout branch &#39;${branchName}&#39;&quot;</span><span class="o">,</span><span class="w">  </span><span class="c1">// ‚Üê Parameterized label</span>
<span class="w">        </span><span class="nl">returnStdout:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="o">]</span>
<span class="o">}</span>
</code></pre></div>
<h5 id="b-bitbucket-api-logging-integration">(b) Bitbucket API Logging Integration</h5>
<pre class="mermaid"><code>flowchart LR
    subgraph Library["bitbucketApiLibrary"]
        BUILD[createBuildStatus]
        REPORT[createTestReport]
    end

    subgraph Helper["bitbucketApiHelper"]
        CALL[call]
        HTTP[HttpApiService]
    end

    subgraph Logger["logger"]
        START[stepStart]
        SUCCESS[stepSuccess]
        ERROR[stepError]
    end

    BUILD --&gt;|"{apiUrl, body, method}"| CALL
    REPORT --&gt;|"{apiUrl, body, method}"| CALL

    CALL --&gt; START
    CALL --&gt; HTTP
    HTTP --&gt;|success| SUCCESS
    HTTP --&gt;|failure| ERROR</code></pre>
<h5 id="same-pattern-applied">Same Pattern Applied</h5>
<table>
<thead>
<tr>
<th>Library</th>
<th>Metadata</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>GitLibrary</td>
<td><code>script</code>, <code>label</code></td>
<td>Shell command + log message</td>
</tr>
<tr>
<td>ShellLibrary</td>
<td><code>script</code>, <code>label</code></td>
<td>Shell command + log message</td>
</tr>
<tr>
<td>SSHShellLibrary</td>
<td><code>script</code>, <code>label</code></td>
<td>SSH command + log message</td>
</tr>
<tr>
<td>bitbucketApiLibrary</td>
<td><code>apiUrlString</code>, <code>requestBody</code>, <code>method</code></td>
<td>API request info</td>
</tr>
</tbody>
</table>
<h4 id="222-helper-auto-logging-with-metadata">2.2.2 Helper Auto Logging with Metadata</h4>
<p><strong>shellScriptHelper</strong>: Reads <code>label</code> from Library and automatically calls logger</p>
<div class="highlight"><pre><span></span><code><span class="c1">// shellScriptHelper.groovy</span>
<span class="kt">def</span><span class="w"> </span><span class="nf">call</span><span class="o">(</span><span class="n">Closure</span><span class="w"> </span><span class="n">shellScriptClosure</span><span class="o">,</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[])</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">Map</span><span class="w"> </span><span class="n">shMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shellScriptClosure</span><span class="o">(*</span><span class="n">args</span><span class="o">)</span>
<span class="w">    </span><span class="n">Map</span><span class="w"> </span><span class="n">validatedShMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">validateShMap</span><span class="o">(</span><span class="n">shMap</span><span class="o">)</span>

<span class="w">    </span><span class="c1">// Read label for auto logging</span>
<span class="w">    </span><span class="n">logger</span><span class="o">.</span><span class="na">stepStart</span><span class="o">(</span><span class="s2">&quot;&#39;${validatedShMap.script}&#39; &#39;${validatedShMap.label}&#39; (Execute)&quot;</span><span class="o">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">validatedShMap</span><span class="o">.</span><span class="na">returnStatus</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">executeReturnStatus</span><span class="o">(</span><span class="n">validatedShMap</span><span class="o">)</span><span class="w">  </span><span class="c1">// Success/failure logging inside</span>
<span class="w">    </span><span class="o">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">validatedShMap</span><span class="o">.</span><span class="na">returnStdout</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">executeReturnStdout</span><span class="o">(</span><span class="n">validatedShMap</span><span class="o">)</span><span class="w">  </span><span class="c1">// Result logging inside</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div>
<p><strong>bitbucketApiHelper</strong>: Same pattern for API execution + auto logging</p>
<div class="highlight"><pre><span></span><code><span class="c1">// bitbucketApiHelper.groovy</span>
<span class="kt">def</span><span class="w"> </span><span class="nf">call</span><span class="o">(</span><span class="n">Map</span><span class="w"> </span><span class="n">bitbucketApiMap</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">logger</span><span class="o">.</span><span class="na">stepStart</span><span class="o">(</span><span class="s2">&quot;bitbucketApiHelper execution started&quot;</span><span class="o">)</span>

<span class="w">    </span><span class="c1">// Execute API with Map received from bitbucketApiLibrary</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">bitbucketApiMap</span><span class="o">.</span><span class="na">method</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">bitbucketApiService</span><span class="o">.</span><span class="na">post</span><span class="o">(</span>
<span class="w">            </span><span class="n">bitbucketApiMap</span><span class="o">.</span><span class="na">apiUrlString</span><span class="o">,</span>
<span class="w">            </span><span class="n">bitbucketApiMap</span><span class="o">.</span><span class="na">requestBody</span><span class="o">,</span>
<span class="w">            </span><span class="n">bitbucketAccessToken</span>
<span class="w">        </span><span class="o">)</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="n">logger</span><span class="o">.</span><span class="na">stepSuccess</span><span class="o">(</span><span class="s2">&quot;bitbucketApiHelper execution completed&quot;</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<hr />
<h3 id="23-integration-with-shellscripthelper">2.3 Integration with shellScriptHelper</h3>
<p>shellScriptHelper uses logger internally for auto logging:</p>
<pre class="mermaid"><code>sequenceDiagram
    participant Stage as stageProjectPrepare
    participant SSH as shellScriptHelper
    participant LOG as logger
    participant SH as Jenkins sh()

    Stage-&gt;&gt;SSH: execute(GitLibrary.FetchOrigin)
    SSH-&gt;&gt;LOG: stepStart("Fetching origin")
    SSH-&gt;&gt;SH: sh("git fetch origin")
    SH--&gt;&gt;SSH: result
    alt Success
        SSH-&gt;&gt;LOG: stepSuccess("Origin fetched")
    else Failure
        SSH-&gt;&gt;LOG: stepFailed("Fetch failed")
    end
    SSH--&gt;&gt;Stage: result</code></pre>
<p><strong>Integration Benefits:</strong>
- No need to write logging code every time in Stage module
- Auto start/success/failure logging when executing Shell commands
- Consistent format guaranteed</p>
<hr />
<h2 id="3-beforeafter-comparison">3. Before/After Comparison</h2>
<h3 id="stage-log-blue-ocean-ui">Stage Log (Blue Ocean UI)</h3>
<table>
<thead>
<tr>
<th>Before</th>
<th>After</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="Before - scattered echo" src="../../resources/stage-logger-before.png" /></td>
<td><img alt="After - 3-Level logging" src="../../resources/stage-logger-after.png" /></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="console-log">Console Log</h3>
<blockquote>
<p><strong>Note</strong>: Console screenshot could not be captured, substituting with text.</p>
</blockquote>
<h4 id="before-scattered-echo">Before (scattered echo)</h4>
<div class="highlight"><pre><span></span><code>[Pipeline] echo
2025-03-20T10:23:45.123Z Fetching origin...
[Pipeline] sh
2025-03-20T10:23:45.456Z + git fetch origin
[Pipeline] echo
2025-03-20T10:23:46.789Z REPORT_DIR: /workspace/PRJob/feature-branch
[Pipeline] echo
2025-03-20T10:23:47.012Z Sending build status to Bitbucket
</code></pre></div>
<p><strong>Problems</strong>: All messages at same level, no structure, difficult to trace errors</p>
<h4 id="after-3-level-logger">After (3-Level Logger)</h4>
<div class="highlight"><pre><span></span><code>===== STAGE Starting: [ Jenkins Initialization ] =====
--- STEPS Starting Group: [ Set Up Environment Variables ] ---
‚û°Ô∏è Step Starting: [ Configure Report Directory ]...
üí¨ Step Info: [ REPORT_DIR: /workspace/PRJob/feature-branch ]
‚úÖ Step Completed: [ Configure Report Directory ]
--- STEPS Completed Group: [ Set Up Environment Variables ] ---
===== STAGE Completed: [ Jenkins Initialization ] =====
</code></pre></div>
<hr />
<h3 id="change-summary">Change Summary</h3>
<table>
<thead>
<tr>
<th>Item</th>
<th>Before</th>
<th>After</th>
</tr>
</thead>
<tbody>
<tr>
<td>Logging function location</td>
<td>generalHelper, jsHelper (copied)</td>
<td>logger.groovy (single)</td>
</tr>
<tr>
<td>Format consistency</td>
<td>None</td>
<td>100%</td>
</tr>
<tr>
<td>Error traceability</td>
<td>Difficult</td>
<td>Immediate identification</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="reference">Reference</h2>
<ul>
<li><a href="../phase-2-3-level-logger-system-implementation/changelog/">Phase 2 Changelog</a> - Detailed implementation process record</li>
<li><a href="highlights.md">highlights.md</a> - Logger System Integration section</li>
<li><a href="refactoring-result-snapshot.md">refactoring-result-snapshot.md</a> - Facade Pattern explanation</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.indexes", "navigation.top", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>